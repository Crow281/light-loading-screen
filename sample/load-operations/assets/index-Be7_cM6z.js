(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function c(t){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(t)}function p(t,e){if(c(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function f(t){var e=p(t,"string");return c(e)=="symbol"?e:e+""}function u(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class b{constructor(e){this._element=e;const r=e.style;r.zIndex="1000",r.display="flex",r.position="fixed",r.inset="0",r.justifyContent="center",r.alignItems="center",r.background="white"}get element(){return this._element}get zIndex(){return this._element.style.zIndex}set zIndex(e){this._element.style.zIndex=e}get background(){return this._element.style.background}set background(e){this._element.style.background=e}}function y(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 24 24");const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d","M 4,4 L 20,20 M 20,4 L 4,20"),e.setAttribute("stroke","black"),e.setAttribute("stroke-width","2"),t.appendChild(e),t}function _(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","-4 -4 24 24");const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d","M 13.656854249,13.656854249 A 8,8 0 1 1 16,8"),e.setAttribute("fill","none"),e.setAttribute("stroke","black"),e.setAttribute("stroke-width","2"),t.appendChild(e);const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d","M 21,6 L 16,10 L 11,6"),t.appendChild(r),t}const m="2rem";function h(t){const e=document.createElement("button");e.hidden=!0;const r=e.style;r.margin="1rem",r.padding="0.2rem";const n=t.style;return n.verticalAlign="middle",n.width=m,n.height=m,e.appendChild(t),e}class v{constructor(e){u(this,"_onTryAgain",null),u(this,"_onCancel",null),this._element=e;const r=e.style;r.padding="1rem";const n=document.createElement("p");this._messageParagraph=n,e.appendChild(n);const s=document.createElement("div"),i=s.style;i.display="flex",i.justifyContent="center",e.appendChild(s);const o=h(_());this._tryAgainButton=o,o.onclick=()=>{this._onTryAgain()},s.append(o);const a=h(y());this._cancelButton=a,a.onclick=()=>{this._onCancel()},s.append(a),this.messageColor="red"}get element(){return this._element}get message(){return this._messageParagraph.innerText}set message(e){this._messageParagraph.innerText=e}get messageColor(){return this._messageParagraph.style.color}set messageColor(e){this._messageParagraph.style.color=e}get onTryAgain(){return this._onTryAgain}set onTryAgain(e){this._onTryAgain=e,this._tryAgainButton.hidden=!e}get onCancel(){return this._onCancel}set onCancel(e){this._onCancel=e,this._cancelButton.hidden=!e}}class w{constructor(e){this._element=e;const r=e.style;r.borderRadius="50%",r.borderStyle="solid",r.borderColor="transparent",this.size="3rem",this.borderSize="0.75rem",this.color="rgb(64, 150, 255)",e.animate([{transform:"rotate(0deg)"},{transform:"rotate(360deg)"}],{duration:1e3,iterations:Number.POSITIVE_INFINITY})}get element(){return this._element}get size(){return this._element.style.width}set size(e){const r=this._element.style;r.width=e,r.height=e}get borderSize(){return this._element.style.borderWidth}set borderSize(e){this._element.style.borderWidth=e}get color(){return this._element.style.borderTopColor}set color(e){const r=this._element.style;r.borderTopColor=e,r.borderBottomColor=e}get animation(){return this._element.style.animation}set animation(e){this._element.style.animation=e}}let l=function(t){return t[t.None=0]="None",t[t.Spinner=1]="Spinner",t[t.ErrorDialog=2]="ErrorDialog",t}({});class E{constructor(){u(this,"_onVisibleListeners",[]),u(this,"_state",l.None);const e=document.createElement("div");this._background=new b(e);const r=document.createElement("div");this._spinner=new w(r);const n=document.createElement("div");this._errorDialog=new v(n),this.state=l.Spinner}get root(){return this._background.element}get background(){return this._background}get spinner(){return this._spinner}get errorDialog(){return this._errorDialog}get visible(){return this._background.element.parentElement!==null}set visible(e){if(this.visible!==e){if(e)document.body.appendChild(this._background.element);else{const r=this._background.element;r.parentElement.removeChild(r)}for(const r of this._onVisibleListeners)r(e)}}addVisibleListener(e){this._onVisibleListeners.push(e)}removeVisibleListener(e){const r=this._onVisibleListeners,n=r.indexOf(e);return n===-1?!1:(r.splice(n,1),!0)}get state(){return this._state}set state(e){if(this._state===e)return;const r=this._background.element,n=this.getStateElements(this._state),s=this.getStateElements(e);for(const i of n)r.removeChild(i);for(const i of s)r.appendChild(i);this._state=e}getStateElements(e){switch(e){case l.Spinner:return[this._spinner.element];case l.ErrorDialog:return[this._errorDialog.element];default:return[]}}}function g(t,e,r){t.visible=!0,t.state=l.Spinner,r||(r=n=>n?String(n):"Error âš "),e.then(n=>{t.visible=!1},n=>{t.state=l.ErrorDialog,t.errorDialog.message=r(n)})}function C(t,e,r){t.errorDialog.onTryAgain=()=>{g(t,e(),r)},g(t,e(),r)}function A(t,e){const r=()=>{e.removeEventListener("load",n),e.removeEventListener("error",s)},n=i=>{r(),t.visible=!1},s=i=>{r(),t.state=l.ErrorDialog,t.errorDialog.message=i.message,t.errorDialog.onTryAgain=()=>{window.location.reload()}};t.visible=!0,t.state=l.Spinner,e.addEventListener("load",n),e.addEventListener("error",s)}function L(t){const e=t.root;let r=[];const n=s=>{const i=document.body;if(s){const o=i.children;for(let a=o.length-1;a>=0;--a){const d=o.item(a);d!==e&&(d.remove(),r.push(d))}}else{for(let o=r.length-1;o>=0;--o)i.appendChild(r[o]);r=[]}};return t.addVisibleListener(n),n(t.visible),n}export{E as L,u as _,C as a,A as b,c,g as d,L as s,f as t};
