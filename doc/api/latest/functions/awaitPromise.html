<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>awaitPromise | @crow281/light-loading-screen</title><meta name="description" content="Documentation for @crow281/light-loading-screen"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@crow281/light-loading-screen</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@crow281/light-loading-screen</a></li><li><a href="awaitPromise.html">awaitPromise</a></li></ul><h1>Function awaitPromise</h1></div><section class="tsd-panel"><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="awaitpromise" class="tsd-anchor"></a><span class="tsd-kind-call-signature">awaitPromise</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">loadingScreen</span><span class="tsd-signature-symbol">:</span> <a href="../classes/LoadingScreen.html" class="tsd-signature-type tsd-kind-class">LoadingScreen</a><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">promise</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">unknown</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">convertReasonToMessage</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">reason</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">unknown</span><span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">void</span><a href="#awaitpromise" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Intended for operations that don't offer the user the chance
to try again.</p>
<p>Sets the loading screen to animate until parameter promise completes.</p>
<p>If the promise is successful, the loading screen will then remove itself.</p>
<p>If the promise fails, it will display the error.
Unless you set <a href="../interfaces/ErrorDialog.html#ontryagain" class="tsd-kind-accessor">ErrorDialog.onTryAgain</a> or
<a href="../interfaces/ErrorDialog.html#oncancel" class="tsd-kind-accessor">ErrorDialog.onCancel</a> yourself,
the loading screen will stay there.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">loadingScreen</span>: <a href="../classes/LoadingScreen.html" class="tsd-signature-type tsd-kind-class">LoadingScreen</a></span><div class="tsd-comment tsd-typography"><p>UI widget used to indicate progress to user.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">promise</span>: <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">unknown</span><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>Promise we want the loading screen to wait on.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">convertReasonToMessage</span>: <span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">reason</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">unknown</span><span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>If promise fails, this method will be passed the promise's error reason.
Whatever string it returns will be used as the error message.</p>
<p>If convertReasonToMessage is left empty and the promise's reason is
non-empty, the error message will default to new String(reason) instead.
If reason is empty, the error message will be &quot;Error ⚠&quot;.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-example"><h4 class="tsd-anchor-link"><a id="example" class="tsd-anchor"></a>Example<a href="#example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>In the following example, the user is attempting to download data
from a website and do something with it.
This will open the loading screen and activate the spinner animation.
If the promise returned by requestData is successful, it will
simply turn off the loading screen.</p>
<p>If something goes terribly wrong, the loading screen will display an
error message. However, user will not be given the option to try again.</p>
<p>Thanks to setting <a href="../interfaces/ErrorDialog.html#oncancel" class="tsd-kind-accessor">ErrorDialog.onCancel</a>, it is possible
for the user to give up.</p>
<pre><code class="typescript"><span class="hl-4">//Import the modules we need.</span><br/><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">LoadingScreen</span><span class="hl-0">, </span><span class="hl-2">awaitPromiseFunction</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;@crow281/light-loading-screen&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-4">//Create the new loading screen.</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">loadingScreen</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">LoadingScreen</span><span class="hl-0">();</span><br/><br/><span class="hl-4">//Configure the loading screen to make it cancellable.</span><br/><span class="hl-4">//This is optional and is NOT configured by awaitPromise.</span><br/><span class="hl-2">loadingScreen</span><span class="hl-0">.</span><span class="hl-2">errorDialog</span><span class="hl-0">.</span><span class="hl-7">onCancel</span><span class="hl-0"> = (): </span><span class="hl-8">void</span><span class="hl-0"> </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-4">//Turn off loading screen</span><br/><span class="hl-0">    </span><span class="hl-2">loadingScreen</span><span class="hl-0">.</span><span class="hl-2">visible</span><span class="hl-0"> = </span><span class="hl-5">false</span><span class="hl-0">;</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-4">//Function to download some data and do something with it.</span><br/><span class="hl-4">//It will be called once while attempting to load.</span><br/><span class="hl-4">//If the returned promise triggers an error, it will display the error</span><br/><span class="hl-4">//and end there.</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-7">requestData</span><span class="hl-0"> = (): </span><span class="hl-8">Promise</span><span class="hl-0">&lt;</span><span class="hl-8">void</span><span class="hl-0">&gt; </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-4">//Download data from some website.</span><br/><span class="hl-0">    </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">data</span><span class="hl-0">: </span><span class="hl-8">Response</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-7">fetch</span><span class="hl-0">(</span><span class="hl-3">&quot;http://example.com&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">//Do whatever you want with the data upon success.</span><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-7">log</span><span class="hl-0">(</span><span class="hl-2">data</span><span class="hl-0">.</span><span class="hl-2">status</span><span class="hl-0">);</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-4">//Create the promise we will wait on.</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">requestDataPromise</span><span class="hl-0"> = </span><span class="hl-7">requestData</span><span class="hl-0">();</span><br/><br/><span class="hl-4">//Activate the loading screen and wait for requestDataPromise to succeed.</span><br/><span class="hl-7">awaitPromiseFunction</span><span class="hl-0">(</span><br/><span class="hl-0">    </span><span class="hl-2">loadingScreen</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">requestDataPromise</span><br/><span class="hl-0">);</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/Crow281/light-loading-screen/blob/076306665e731930823e9bdf763180ac5429a880/src/Utils/AwaitPromise.ts#L97">Utils/AwaitPromise.ts:97</a></li></ul></aside></li></ul></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">@crow281/light-loading-screen</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
